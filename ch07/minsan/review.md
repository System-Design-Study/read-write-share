분산 시스템에서 ID 값의 유일 생성에 대한 고민까지는 하지 못 했는데, 이번 장을 읽으면서 분산 시스템에서 유일 ID값 생성기가 필요한 이유와 설계 종류를 살펴볼 수 있었다.

각 생성기의 동작 원리와 장단점을 알고 있으면, 주어진 상황에 적절한 설계를 제안할 수 있을 것이라 생각한다.

## 유일 ID 생성기 장단점 비교

### 다중 마스터 복제

데이터베이스의 `auto_increment` 기능을 활용하는 설계로, 여러 서버에서 서로 다른 ID 값을 생성한다.

하지만 각 서버의 ID 생성 등차(?) 값이 **데이터베이스 서버 개수에 따라서 결정**되기 때문에, 데이터베이스 서버를 유연하게 추가하거나 삭제하기 어렵다는 단점이 존재한다.

- **장점**
  - 규모 확장성 문제를 어느정도 해결할 수 있다 _(데이터베이스 수를 늘리면 초당 생산 가능 ID 수도 늘릴 수 있음)_
- **단점**
  - 여러 데이터 센터에 걸쳐 규모를 늘리기 어려움
  - ID 값이 시간 흐름에 맞춰서 증가하도록 보장할 수 없음
  - 서버를 추가하거나 삭제할 때도 잘 동작하도록 만들기 어려움

### UUID

128비트의 문자와 숫자 조합으로 구성된 값으로, 중복된 값이 생성될 확률이 매우 적다.

- **장점**
  - 서버 사이의 조율이 필요하지 않기 때문에, 동기화 이슈를 고려하지 않아도 됨
  - 따라서 규모 확장이 용이함
- **단점**
  - 128비트
  - ID를 시간 순으로 정렬할 수 없음
  - ID에 숫자가 아닌 값이 포함될 수 있음

### 티켓 서버

매표소에서 티켓을 발급하는 것처럼, ID를 발급하는 서버를 두는 방식이다.

다중 마스터 복제 방식과 마찬가지로 `auto_increment` 기능을 활용한다.

- **장점**
  - 유일성이 보장되는 오직 숫자로만 구성된 ID를 쉽게 만들 수 있다.
  - 구현이 쉽고, 중소 규모 애플리케이션에 적합
- **단점**
  - 티켓 서버가 `SPOF`가 된다.

### 트위터 스노플레이크 접근법

ID 값을 구성하는 비트를 여러 섹션으로 나누어서 관리하는 방식이다. 각 비트의 크기를 조절하여 서비스 요구사항에 알맞게 조정할 수 있다.
